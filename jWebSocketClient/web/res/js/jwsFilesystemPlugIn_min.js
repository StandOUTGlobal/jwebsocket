jws.FileSystemPlugIn={NS:jws.NS_BASE+".plugins.filesystem",processToken:function(aR){if(aR.ns==jws.FileSystemPlugIn.NS){if("load"==aR.reqType){if(aR.code==0){aR.data=Base64.decode(aR.data);if(this.OnFileLoaded){this.OnFileLoaded(aR);}}else{if(this.OnFileError){this.OnFileError(aR);}}}else if("event"==aR.type){if("filesaved"==aR.name){if(this.OnFileSaved){this.OnFileSaved(aR);}}}}},fileLoad:function(bB,d){var bj=this.createDefaultResult();var bt=jws.SCOPE_PRIVATE;if(d){if(d.scope!=undefined){bt=d.scope;}}if(this.isConnected()){var J={ns:jws.FileSystemPlugIn.NS,type:"load",scope:bt,filename:bB};this.sendToken(J,d);}else{bj.code= -1;bj.localeKey="jws.jsc.res.notConnected";bj.msg="Not connected.";}return bj;},fileSave:function(bB,aw,d){var bj=this.createDefaultResult();var bs="base64";var bD=false;var bt=jws.SCOPE_PRIVATE;if(d){if(d.scope!=undefined){bt=d.scope;}if(d.encoding!=undefined){bs=d.encoding;}if(d.suppressEncoder!=undefined){bD=d.suppressEncoder;}}if(!bD){if(bs=="base64"){aw=Base64.encode(aw);}}if(this.isConnected()){var J={ns:jws.FileSystemPlugIn.NS,type:"save",scope:bt,encoding:bs,notify:true,data:aw,filename:bB};this.sendToken(J,d);}else{bj.code= -1;bj.localeKey="jws.jsc.res.notConnected";bj.msg="Not connected.";}return bj;},setFileSystemCallbacks:function(A){if(!A){A={};}if(A.OnFileLoaded!==undefined){this.OnFileLoaded=A.OnFileLoaded;}if(A.OnFileSaved!==undefined){this.OnFileSaved=A.OnFileSaved;}if(A.OnFileError!==undefined){this.OnFileError=A.OnFileError;}}};jws.oop.addPlugIn(jws.jWebSocketTokenClient,jws.FileSystemPlugIn);
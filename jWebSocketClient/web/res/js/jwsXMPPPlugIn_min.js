jws.XMPPPlugIn={NS:jws.NS_BASE+".plugins.xmpp",MODE_AVAILABLE:"available",MODE_AWAY:"away",MODE_CHAT:"chat",MODE_DND:"dnd",MODE_XA:"xa",TYPE_AVAILABLE:"available",TYPE_UNAVAILABLE:"unavailable",TYPE_SUBSCRIBE:"subscribe",TYPE_SUBSCRIBED:"subscribed",TYPE_UNSUBSCRIBE:"unsubscribe",TYPE_UNSUBSCRIBED:"unsubscribed",TYPE_ERROR:"error",processToken:function(aR){if(aR.ns==jws.XMPPPlugIn.NS){if("event"==aR.type){if("chatMessage"==aR.name){if(this.OnXMPPChatMessage){this.OnXMPPChatMessage(aR);}}}else if("getRoster"==aR.reqType){if(this.OnXMPPRoster){this.OnXMPPRoster(aR);}}}},xmppConnect:function(bM,bv,bO,by,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"connect",host:bM,port:bv,domain:bO,useSSL:by};this.sendToken(J,d);}return bj;},xmppDisconnect:function(d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"disconnect"};this.sendToken(J,d);}return bj;},xmppLogin:function(an,aq,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"login",username:an,password:aq};this.sendToken(J,d);}return bj;},xmppLogout:function(d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"logout"};this.sendToken(J,d);}return bj;},xmppRoster:function(d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"getRoster"};this.sendToken(J,d);}return bj;},xmppSetPresence:function(aMode,bU,bT,ca,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"setPresence",pmode:aMode,ptype:bU,ppriority:ca,pstatus:bT};this.sendToken(J,d);}return bj;},xmppOpenChat:function(bo,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"openChat",userId:bo};this.sendToken(J,d);}return bj;},xmppSendChat:function(bo,aMessage,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,type:"sendChat",userId:bo,message:aMessage};this.sendToken(J,d);}return bj;},xmppCloseChat:function(bo,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,userId:bo,type:"closeChat"};this.sendToken(J,d);}return bj;},xmpp:function(bo,d){var bj=this.checkConnected();if(0==bj.code){var J={ns:jws.XMPPPlugIn.NS,userId:bo,type:"closeChat"};this.sendToken(J,d);}return bj;},setXMPPCallbacks:function(A){if(!A){A={};}if(A.OnXMPPChatMessage!==undefined){this.OnXMPPChatMessage=A.OnXMPPChatMessage;}if(A.OnXMPPRoster!==undefined){this.OnXMPPRoster=A.OnXMPPRoster;}}};jws.oop.addPlugIn(jws.jWebSocketTokenClient,jws.XMPPPlugIn);